DROP TABLE FATOVENDAS CASCADE CONSTRAINTS;

DROP TABLE DIMPRODUTO CASCADE CONSTRAINTS;

DROP TABLE DIMCLIENTE CASCADE CONSTRAINTS;

DROP TABLE DIMVENDEDOR CASCADE CONSTRAINTS;

DROP TABLE DIMTEMPO CASCADE CONSTRAINTS;

CREATE TABLE DIMPRODUTO (
       COD_PRODUTO NUMBER(10) PRIMARY KEY,
       NOM_PRODUTO VARCHAR2(50),
       STA_ATIVO VARCHAR2(20) NULL
);

CREATE TABLE DIMCLIENTE (
       COD_CLIENTE NUMBER(10) PRIMARY KEY,
       NOM_CLIENTE VARCHAR2(50),
       STA_ATIVO CHAR(1) NULL
);

CREATE TABLE DIMVENDEDOR (
       COD_VENDEDOR NUMBER(4) PRIMARY KEY,
       NOM_VENDEDOR VARCHAR2(50)
);

CREATE TABLE DIMTEMPO (
       DATA_VENDA DATE PRIMARY KEY,
       ANO NUMBER(4),
       MES NUMBER(2),
       DIA NUMBER(2)
);

CREATE TABLE FATOVENDAS (
       COD_PEDIDO NUMBER(10) NOT NULL,
       COD_PRODUTO NUMBER(10) NOT NULL,
       COD_CLIENTE NUMBER(10) NOT NULL,
       COD_VENDEDOR NUMBER(4) NOT NULL,
       DATA_VENDA DATE NOT NULL,
       QTD_VENDIDA NUMBER(10) NOT NULL,
       VAL_UNITARIO NUMBER(12, 2) NOT NULL,
       VAL_BRUTO NUMBER(12, 2) NOT NULL,
       VAL_DESCONTO NUMBER(12, 2),
       VAL_TOTAL NUMBER(12, 2) NOT NULL,
       PRIMARY KEY (COD_PEDIDO, COD_PRODUTO, COD_CLIENTE, COD_VENDEDOR, DATA_VENDA)
);

CREATE TABLE AUDITORIA_DIMENSOES (
       ID_AUDITORIA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       NOME_TABELA VARCHAR2(50),
       OPERACAO VARCHAR2(10),
       DADOS_INSERIDOS CLOB,
       DATA_OPERACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);